<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workouts</title>
    <link rel="stylesheet" href="/home.css">
    <link rel="stylesheet" href="/template.css">
</head>
<body>
    <%- include('partials/menu'); -%>
    <div class="container" id="container">
        <div class="content">
            <h1>Look for exercises</h1>
            <p>Select muscle group:</p>
            <div id="muscle-buttons" class="button-group">
            </div>
            
            <div class="type">
                <p>Select exercise type:</p>
                <div id="type-buttons" class="button-group">
                </div>
            </div>
        </div>
        
        <div class="result" id="resultApi"></div>
    </div>
    <%- include('partials/popup'); -%>
    <%- include('partials/results'); -%>
    <%- include('partials/favorite'); -%>
    <script>
        const container = document.getElementById('container');            
        const result = document.getElementById('resultApi');
        const muscleButtons = document.getElementById('muscle-buttons');
        const typeButtons = document.getElementById('type-buttons');
        const muscleGroups = [
            'Abdominals', 'Abductors', 'Adductors', 'Biceps', 'Calves', 'Chest', 
            'Forearms', 'Glutes', 'Hamstrings', 'Lats', 'Lower Back', 'Middle Back', 
            'Neck', 'Quadriceps', 'Traps', 'Triceps'
        ];
        const exerciseTypes = [
            'Cardio', 'Olympic_weightlifting', 'Plyometrics', 
            'Powerlifting', 'Strength', 'Stretching', 'Strongman'
        ];

        const createButton = (text, onClickHandler) => {
            const button = document.createElement('button');
            button.className = 'workout-button';
            button.textContent = text;
            button.addEventListener('click', onClickHandler);
            return button;
        };

        muscleGroups.forEach(muscle => {
            muscleButtons.appendChild(createButton(muscle, () => getWorkouts(muscle, '')));
        });

        exerciseTypes.forEach(type => {
            typeButtons.appendChild(createButton(type, () => getWorkouts('', type)));
        });

        const getWorkouts = (muscle, type) => {
            fetch(`/exercises/exercises?muscle=${muscle}&type=${type}`)
                .then(response => response.json())
                .then(data => createResult(data))
                .catch(error => console.error('Error fetching workouts:', error));
        };
    </script>
</body>
</html>
